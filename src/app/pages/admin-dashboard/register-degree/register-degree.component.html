<div class="form-page-container">
    
    <form class="card form-card" [formGroup]="courseForm" (ngSubmit)="onSubmit()">
        
        <h2 class="form-title">Adicionar Curso</h2>

        <div class="form-group">
            <label for="nome">Nome</label>
            <input type="text" id="nome" formControlName="nome" placeholder="Ex: Engenharia Informática">
            @if (courseForm.get('nome')?.invalid && courseForm.get('nome')?.touched) {
                <small class="error-msg">O nome é obrigatório.</small>
            }
        </div>

        <div class="form-group">
            <label>Cadeiras</label>
            
            <div class="cadeiras-list" formArrayName="cadeiras">
                @for(cadeiraGroup of cadeiras.controls; track $index; let i = $index) {
                    <div class="cadeira-item" [formGroupName]="i">
                        <span class="code">{{ cadeiraGroup.value.code }}</span>
                        <span class="name">{{ cadeiraGroup.value.name }}</span>
                        <i class="bi bi-trash" (click)="removeCadeira(i)"></i>
                    </div>
                }
                @if(cadeiras.controls.length === 0) {
                    <p class="empty-list-msg">Adicione cadeiras a este curso.</p>
                }
            </div>
            
            <div class="add-button-container">
                <button type="button" class="btn-add" (click)="addCadeira()">
                    <i class="bi bi-plus-circle-fill"></i>
                </button>
            </div>
        </div>

        <hr class="divider">

        <button type="submit" class="btn btn-primary btn-submit" [disabled]="courseForm.invalid">
            Registar curso
        </button>
    </form>
</div>